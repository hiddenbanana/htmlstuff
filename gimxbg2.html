<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YouTube Playlist + Overlay</title>
  <style>
    :root {
      /* Adjust these */
      --overlay-width: 220px;
      --overlay-opacity: 1;
      --overlay-top: 16px;
      --overlay-left: 16px;

      /* Video size */
      --max-width: 960px;
      --aspect-w: 16;
      --aspect-h: 9;
    }

    body {
      margin: 0;
      background: #0b0b0b;
      color: #eee;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display: grid;
      place-items: center;
      min-height: 100vh;
      padding: 24px;
      box-sizing: border-box;
    }

    .wrap {
      width: min(var(--max-width), 100%);
    }

    .player-shell {
      position: relative;
      width: 100%;
      aspect-ratio: var(--aspect-w) / var(--aspect-h);
      background: #000;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,.45);
    }

    /* YouTube player fills the container */
    #player {
      position: absolute;
      inset: 0;
    }

    /* Overlay image */
    .overlay {
      position: absolute;
      top: var(--overlay-top);
      left: var(--overlay-left);
      width: var(--overlay-width);
      height: auto;
      opacity: var(--overlay-opacity);
      pointer-events: none; /* overlay won't block clicks on the video */
      z-index: 5;
      filter: drop-shadow(0 6px 18px rgba(0,0,0,.6));
      user-select: none;
    }

    .bar {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .meta {
      font-size: 14px;
      opacity: 0.9;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: baseline;
    }

    button {
      background: #1f1f1f;
      color: #eee;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 10px 12px;
      cursor: pointer;
    }
    button:hover { background: #2a2a2a; }

    a { color: #9bdcff; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="player-shell">
      <div id="player"></div>

      <!-- Your overlay image -->
      <img
        class="overlay"
        src="https://raw.githubusercontent.com/hiddenbanana/htmlstuff/refs/heads/main/GIMX-LOGO-white.png"
        alt="Overlay"
      />
    </div>

    <div class="bar">
      <div class="meta">
        <div><strong>Now:</strong> <span id="nowPlaying">Loadingâ€¦</span></div>
        <div><strong>Index:</strong> <span id="idx">-</span> / <span id="total">-</span></div>
      </div>

      <div class="controls">
        <button id="prevBtn" type="button">Prev</button>
        <button id="nextBtn" type="button">Next</button>
        <button id="toggleLoopBtn" type="button">Loop: On</button>
      </div>
    </div>

    <p style="opacity:.75; margin-top:10px; font-size:13px;">
      Tip: Edit the <code>VIDEOS</code> array in the script to add/remove videos.
    </p>
  </div>

  <!-- Load YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    /**
     * Put your videos here. You can use:
     * - Full URLs like "https://www.youtube.com/watch?v=Vn7glkAJEE4"
     * - Short URLs like "https://youtu.be/Vn7glkAJEE4"
     * - Or just IDs like "Vn7glkAJEE4"
     */
    const VIDEOS = [
      "https://www.youtube.com/watch?v=Vn7glkAJEE4",
      // "dQw4w9WgXcQ",
      // "https://youtu.be/VIDEO_ID_HERE",
    ];

    // Optional display titles (same length as VIDEOS). If omitted, shows the ID.
    const TITLES = [
      "Vn7glkAJEE4",
      // "Example title",
    ];

    let player;
    let index = 0;
    let loopOn = true;

    const $now = () => document.getElementById("nowPlaying");
    const $idx = () => document.getElementById("idx");
    const $total = () => document.getElementById("total");
    const $loopBtn = () => document.getElementById("toggleLoopBtn");

    function extractVideoId(input) {
      // If it's already an 11-char-ish ID with no url parts, return as-is.
      if (!input.includes("http") && !input.includes("/") && !input.includes("?")) return input;

      try {
        const url = new URL(input);
        // youtube.com/watch?v=ID
        const v = url.searchParams.get("v");
        if (v) return v;

        // youtu.be/ID
        if (url.hostname.includes("youtu.be")) {
          return url.pathname.replace("/", "");
        }

        // /embed/ID or /shorts/ID
        const parts = url.pathname.split("/").filter(Boolean);
        const embedIdx = parts.indexOf("embed");
        const shortsIdx = parts.indexOf("shorts");
        if (embedIdx !== -1 && parts[embedIdx + 1]) return parts[embedIdx + 1];
        if (shortsIdx !== -1 && parts[shortsIdx + 1]) return parts[shortsIdx + 1];

      } catch (e) {
        // If URL parsing fails, fallback below
      }

      // Fallback: try to find v=ID pattern
      const m = input.match(/[?&]v=([^&]+)/);
      return m ? m[1] : input;
    }

    const videoIds = VIDEOS.map(extractVideoId);

    function updateUI() {
      $total().textContent = videoIds.length;
      $idx().textContent = (index + 1);
      $now().textContent = (TITLES[index] ?? videoIds[index]);
      $loopBtn().textContent = `Loop: ${loopOn ? "On" : "Off"}`;
    }

    function playAt(i) {
      if (!videoIds.length) return;
      index = (i + videoIds.length) % videoIds.length; // wrap
      updateUI();
      player.loadVideoById(videoIds[index]);
    }

    function next() {
      if (!videoIds.length) return;
      if (!loopOn && index === videoIds.length - 1) return; // stop at end if loop off
      playAt(index + 1);
    }

    function prev() {
      if (!videoIds.length) return;
      playAt(index - 1);
    }

    // Called by the YouTube API when ready
    function onPlayerReady() {
      updateUI();
      player.playVideo();
    }

    // Called when the player state changes
    function onPlayerStateChange(event) {
      // 0 = ended
      if (event.data === YT.PlayerState.ENDED) {
        next();
      }
    }

    // YouTube API callback (must be global)
    window.onYouTubeIframeAPIReady = function () {
      player = new YT.Player("player", {
        videoId: videoIds[index],
        playerVars: {
          autoplay: 1,
          controls: 1,
          rel: 0,
          modestbranding: 1,
          playsinline: 1
        },
        events: {
          onReady: onPlayerReady,
          onStateChange: onPlayerStateChange
        }
      });
    };

    // Buttons
    document.getElementById("nextBtn").addEventListener("click", next);
    document.getElementById("prevBtn").addEventListener("click", prev);
    document.getElementById("toggleLoopBtn").addEventListener("click", () => {
      loopOn = !loopOn;
      updateUI();
    });
  </script>
</body>
</html>
